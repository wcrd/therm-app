<!DOCTYPE html>
<html lang="en" class="h-100">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- Use bootstrap css for quick styling -->
    <link rel="stylesheet" href="https://bootswatch.com/4/flatly/bootstrap.min.css">
    <!-- Style Overrides -->
    <link rel="stylesheet" href="./app.css">
    <!-- Font Awesome for icons -->
    <script src="https://kit.fontawesome.com/75f6728128.js" crossorigin="anonymous"></script>
    <!-- jQuery for responsive table features. Replace with vanilla JS-->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

    <title>THERM App</title>
</head>
<body class="h-100">
    <div class="container-fluid d-flex flex-column h-100">
        <div>
            <h1 class="d-inline display-4">THERM App</h1>
            <h4 class="d-inline text-info">v0.0.1</h4>
        </div>
        <div id="app" class="mt-4 d-flex flex-column flex-grow-1">
            <div class="row d-flex mb-auto col flex-grow-1">
                <div class="col-md-4 pl-0">
                    <h4 class="text-primary d-inline">Input</h4>
                    <div id="control-buttons" class="mb-2 text-right d-inline float-right">
                        <button type="button" id="calculate" class="btn btn-success">Calculate</button>
                        <button type="button" id="reset" class="btn btn-danger">Reset</button>
                        <button type="button" id="dev-test" class="btn btn-info">demo</button>
                    </div>
                    <div class="table">
                        <table class="table table-default table-sm mb-1" id="input-layers">
                            <thead class="table-primary">
                                <tr>
                                    <th style="width: 5%"></th>
                                    <th style="width: 53%">Layer Name</th>
                                    <th style="width: 15%">d [mm]</th>
                                    <th style="width: 15%">k [W/m]</th>
                                    <th style="min-width: 6%" class="text-center align-middle text-success">+</th>
                                    <th style="min-width: 6%" class="text-center align-middle text-danger">x</th>
                                </tr>
                                <tr class='table-light'>
                                    <th colspan="6" class="text-center text-sm text-secondary font-weight-light">Outside</th>
                                </tr>
                            </thead>
                            <tbody class="sortable">
                                <tr>
                                    <td class="align-middle text-center"><i class="fas fa-circle fa-xs text-primary"></i></td>
                                    <td><input type="text" placeholder="material name" class="form-control-plaintext"></td>
                                    <td><input type="text" placeholder="depth" class="form-control-plaintext"></td>
                                    <td><input type="text" placeholder="k-val" class="form-control-plaintext"></td>
                                    <td class="align-middle text-center"><i class="far fa-plus-square fa-lg d-none row-ops add-row"></i></td>
                                    <td class="align-middle text-center"><i class="fas fa-times fa-lg d-none row-ops text-danger delete-row"></i></td>
                                </tr>
                                <tr>
                                    <td class="align-middle text-center"><i class="fas fa-circle fa-xs text-primary"></i></td>
                                    <td><input type="text" placeholder="material name" class="form-control-plaintext"></td>
                                    <td><input type="text" placeholder="depth" class="form-control-plaintext"></td>
                                    <td><input type="text" placeholder="k-val" class="form-control-plaintext"></td>
                                    <td class="align-middle text-center"><i class="far fa-plus-square fa-lg d-none row-ops add-row"></i></td>
                                    <td class="align-middle text-center"><i class="fas fa-times fa-lg d-none row-ops text-danger delete-row"></i></td>  
                                </tr>
                                <tr>
                                    <td class="align-middle text-center"><i class="fas fa-circle fa-xs text-primary"></i></td>
                                    <td><input type="text" placeholder="material name" class="form-control-plaintext"></td>
                                    <td><input type="text" placeholder="depth" class="form-control-plaintext"></td>
                                    <td><input type="text" placeholder="k-val" class="form-control-plaintext"></td>
                                    <td class="align-middle text-center"><i class="far fa-plus-square fa-lg d-none row-ops add-row"></i></td>
                                    <td class="align-middle text-center"><i class="fas fa-times fa-lg d-none row-ops text-danger delete-row"></i></td>
                                </tr>
                                <tr>
                                    <td class="align-middle text-center"><i class="fas fa-circle fa-xs text-primary"></i></td>
                                    <td><input type="text" placeholder="material name" class="form-control-plaintext"></td>
                                    <td><input type="text" placeholder="depth" class="form-control-plaintext"></td>
                                    <td><input type="text" placeholder="k-val" class="form-control-plaintext"></td>
                                    <td class="align-middle text-center"><i class="far fa-plus-square fa-lg d-none row-ops add-row"></i></td>
                                    <td class="align-middle text-center"><i class="fas fa-times fa-lg d-none row-ops text-danger delete-row"></i></td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr class='table-light'>
                                    <th colspan="6" class="text-center text-sm text-secondary font-weight-light">Inside</th>
                                </tr>
                            </tfoot>
                        </table>
                        <div>
                            <button type="button" id="add-air-cavity" class="btn btn-primary btn-sm float-right">+ air cavity</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-8 d-flex flex-column pr-0">
                    <div id="results-container" class="d-flex border border-info rounded">	
                        <div id="construction-properties" class="d-flex col-md-2 flex-column p-2 border-right">
                            <div>
                                <div class="text-info">Construction</div>
                                <table class="table table-sm table-borderless results">
                                    <tr>
                                        <th style="width:60%" class="align-middle">R<sub>construction</sub></th>
                                        <td style="width:40%; min-width:30%"><input type="text" id="r-construction" class="form-control form-control-sm text-right text-body" value="0.0" readonly></td>
                                    </tr>
                                    <tr>
                                        <th class="align-middle">U<sub>construction</sub></th>
                                        <td><input type="text" id="u-construction" class="form-control form-control-sm text-right text-body" value="0.0" readonly></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div id="surface-properties" class="d-flex col-md-2 flex-column p-2 border-right">
                            <div>
                                <div class="text-info">Surface Resistance</div>
                                <table class="table table-sm table-borderless results">
                                    <tr>
                                        <th style="width:70%" class="align-middle">R<sub>surface, external</sub></th>
                                        <td style="width:30%; min-width:25%"><input type="text" id="r-external" class="form-control form-control-sm text-right text-body" value="0.04"></td>
                                    </tr>
                                    <tr>
                                        <th class="align-middle">R<sub>surface, internal</sub></th>
                                        <td><input type="text" id="r-internal" class="form-control form-control-sm text-right text-body" value="0.13"></td>
                                    </tr>
                                    <tr class="bg-light">
                                        <th class="align-middle">Enable</th>
                                        <td>
                                            <div class="custom-control custom-switch text-right">
                                                <input type="checkbox" class="custom-control-input" id="customSwitch1" checked>
                                                <label class="custom-control-label" for="customSwitch1"></label>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div id="total-properties" class="d-flex col-md-2 flex-column p-2 mr-auto border-right">
                            <div>
                                <div class="text-info">Total</div>
                                <table class="table table-sm table-borderless results">
                                    <tr>
                                        <th style="width:60%" class="align-middle">R<sub>total</sub></th>
                                        <td style="width:40%; min-width:25%"><input type="text" id="r-total" class="form-control form-control-sm text-right text-body" value="0.0" readonly></td>
                                    </tr>
                                    <tr>
                                        <th class="align-middle">U<sub>total</sub></th>
                                        <td><input type="text" id="u-total" class="form-control form-control-sm text-right text-body" value="0.0" readonly></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div id="plot-properties" class="d-flex col-md-3 flex-column p-2 border-left">
                            <div>
                                <div class="text-info">Temperature Plot Settings</div>
                                <table class="table table-sm table-borderless results">
                                    <tr>
                                        <th style="width:50%" class="align-middle">t<sub>outside</sub></th>
                                        <td style="width:25%; min-width:20%"><input type="text" id="temp-outside" class="form-control form-control-sm text-right text-body" value="35"></td>
                                    </tr>
                                    <tr>
                                        <th class="align-middle">t<sub>inside</sub></th>
                                        <td><input type="text" id="temp-inside" class="form-control form-control-sm text-right text-body" value="24"></td>
                                    </tr>
                                    <tr>
                                        <td colspan="2" style="height:31px">
                                            <button type="button" id="temp-refresh" class="btn btn-info w-100">
                                                <i class="fas fa-sync-alt fa-sm h-100"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="h-100 mt-4">
                        <canvas id="canvas-construction" class="d-block"></canvas>
                    </div>
                </div>
            </div>
            <div class="row d-flex flex-end">
                <div class="col-md-12 mb-2">
                    <h4 class="text-primary">History</h4>
                    <div class="table constrain" style="min-height: 250px" id="history-div">
                        <table class="table table-sm table-hover table-striped" id="history">
                            <thead class="table-primary">
                                <tr>
                                    <th scope="col" style="min-width:25%; width:35%">Name</th>
                                    <th scope="col" style="min-width:5%; width:10%">Layers</th>
                                    <th scope="col" style="min-width:5%; width:10%">d [mm]</th>
                                    <th scope="col" style="min-width:10%; width:10%">k [W/mK]</th>
                                    <th scope="col" style="min-width:10%; width:10%">R layers [m2K/W]</th>
                                    <th scope="col" style="min-width:10%; width:10%">U [W/m2K]</th>
                                    <th scope="col" style="min-width:10%; width:10%">R [m2K/W]</th>
                                    <th scope="col" style="min-width:10%; width:5%"></th>
                                    <th scope="col" class="d-none" id="c_id"></th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="text-right">
                        <button type="button" id="clear-history" class="btn btn-danger float-left">Clear</button>
                        <button type="button" id="expand-history" class="btn btn-info"><i class="fas fa-angle-down mr-2"></i><span>Expand Table</span></button>
                        <label class="btn btn-primary m-0">Import<input id="import-history" type="file" hidden></label>
                        <button type="button" id="export-history" class="btn btn-primary">Export</button>
                    </div>      
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        $('.sortable').sortable();
    </script>
    <!-- App -->
    <script type ="module" src="app.js"></script>
    <!-- Charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js"></script>
    <!-- Random Color -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/randomcolor/0.5.4/randomColor.min.js"></script>
</body>
</html>